<div *ngIf='!showTemplatePopup && showForm' class="p-24">
  <app-question-creation-header (buttonType)="buttonTypeHandler($event)" [questionMetaData]="questionMetaData"
    [disableSubmission]="isEditorThrowingError" (questionStatus)="handleReviewrStatus($event)"   [rejectComment]="rejectComment" [role]="role"></app-question-creation-header>
  <form #mcqFormControl="ngForm" class="ui form mcq-vertical mt-8" *ngIf="!showPreview">
    <div class="field mcq-title">
      <label class="mb-16 fs-1-286">Question</label>
      <label *ngIf="showFormError && [undefined, ''].includes(mcqForm.question)"
        class="ui basic red error label pt-1">Fill Question</label>
      <app-ckeditor-tool (editorDataOutput)="mcqForm.question = $event.body; getMedia($event.mediaobj);" [editorConfig]="questionMetaData"
        [editorDataInput]="mcqForm.question"></app-ckeditor-tool>
    </div>
    <div class="mcq-options">
      <label *ngIf="showFormError && !mcqForm.answer" class="ui basic red error label pt-1">Select one correct answer</label>
      <div class="mcq-option" *ngFor="let option of mcqForm.options; let i=index">
          <div class="twelve wide field">
            <label class="mb-8 fs-1">Option {{i + 1}}:</label>
            <label *ngIf="showFormError && (option.body === undefined || option.body === '')"
              class="ui basic red error label pt-1">Fill this option</label>
            <app-ckeditor-tool (hasError)="handleEditorError($event)"
              (editorDataOutput)="option.body = $event.body; option.length = $event.length; getMedia($event.mediaobj)"
              [editorConfig]="questionMetaData" [editorDataInput]="option.body" [setCharacterLimit]="setCharacterLimit"
              [setImageLimit]="setImageLimit"></app-ckeditor-tool>
            <div class="mcq-checkbox-answer">
              <!-- <sui-radio-button name="'correct_response'" value={{i}} [(ngModel)]="mcqForm.answer"></sui-radio-button>
              <label>Mark as right answer</label> -->
              <button *ngIf='mcqForm.answer !== i.toString()' 
              (click)="mcqForm.answer = i.toString()" class="sb-btn sb-btn-normal sb-btn-gray mr-8"> Mark as right answer </button>
              <button *ngIf='mcqForm.answer === i.toString()' 
              class="sb-btn sb-btn-normal sb-btn-primary mr-8"> Marked as right answer </button>
              <button [disabled]="mcqForm.options.length < 3" (click)="mcqForm.deleteOption(i)" class="sb-btn sb-btn-normal sb-btn-tertiary"> Delete this option </button>
            </div>
            <label *ngIf="showFormError && option.length > 160" class="ui basic red error label pt-1">please reduce the size</label>
          </div>
      </div>
      <button *ngIf='mcqForm.options.length < 4' class="sb-btn sb-btn-normal sb-btn-primary" (click)="mcqForm.addOptions()"> Add more Options </button>    
    </div>
    <div class="ui two column grid width-100">
        <div class="one column row" *ngIf="learningOutcomeOptions.length">
          <div class="column">
              <label>Learning Outcome</label>
              <div>
                <sui-select class="selection width-100" #learningOutcome="ngModel" [(ngModel)]="mcqForm.learningOutcome"
                  name="'learningOutcome'" required>
                  <sui-select-option *ngFor="let option of learningOutcomeOptions" [value]="option.name"></sui-select-option>
                </sui-select>
              </div>
              <label class="ui basic red error label pt-1 mt-5 width-100"
                *ngIf="(learningOutcome.touched || showFormError) && learningOutcome.invalid">Fill Learning Outcome</label>
          </div>
        </div>
        <div class="column">
            <label>Learning Level</label>
            <div>
              <sui-select class="selection width-100" #bloomsLevel="ngModel" [(ngModel)]="mcqForm.bloomsLevel" name="'bloomsLevel'"
                required>
                <sui-select-option *ngFor="let option of bloomsLevelOptions" [value]="option"></sui-select-option>
              </sui-select>
            </div>
            <label class="ui basic red error label pt-1 mt-5 width-100"
              *ngIf="(bloomsLevel.touched || showFormError) && bloomsLevel.invalid">Fill Learning Level </label>
        </div>
      </div>
  </form>
  <app-question-preview *ngIf="showPreview" [questionMetaData]="previewData"></app-question-preview>
</div>

<app-mcq-template-selection *ngIf='showTemplatePopup' (templateSelection)="handleTemplateSelection($event)">
</app-mcq-template-selection>